<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="ash">
  
  
  
  <link rel="prev" href="https://ash-z01.github.io/2020/boolandcondition/" />
  <link rel="next" href="https://ash-z01.github.io/2021/cap/" />
  <link rel="canonical" href="https://ash-z01.github.io/2020/recursion/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Recursion of Lambda-Calculus | Rubik Cell Space
       
  </title>
  <meta name="title" content="Recursion of Lambda-Calculus | Rubik Cell Space">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/ash-z01.github.io\/"
    },
    "articleSection" : "posts",
    "name" : "Recursion of Lambda-Calculus",
    "headline" : "Recursion of Lambda-Calculus",
    "description" : "ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šï¼Œæ­£åœ¨ç»™å°å’Œå°šè®²æ•…äº‹å‘¢ï¼æ•…äº‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€œä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šï¼Œæ­£åœ¨ç»™å°å’Œå°šè®²æ•…äº‹å‘¢ï¼æ•…äº‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€˜ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šï¼Œæ­£åœ¨ç»™å°å’Œå°šè®²æ•…äº‹å‘¢ï¼æ•…äº‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€¦â€¦â€™â€\n 0x01 ä¸åŠ¨ç‚¹ å®šä¹‰å‡½æ•° ğ‘“:â„â†¦â„ï¼Œå¦‚æœ âˆƒğ‘¥âˆˆğ·(ğ‘“)ï¼Œä½¿å¾— ğ‘¥=ğ‘“(ğ‘¥)ï¼Œåˆ™ç§°ç‚¹ ğ‘¥ æ˜¯å‡½æ•° ğ‘“(ğ‘¥) çš„ä¸åŠ¨ç‚¹.\n\/\/ ç­‰å¼ x = f(x) å¯ä»¥è¿›è¡Œå¦‚ä¸‹çš„æ— ç©·å˜æ¢ x = f(x) = f(f(x)) = f(f(f(x))) = ... 0x02 é€’å½’  é€’å½’çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒå…è®¸ç”¨æˆ·ç”¨æœ‰é™çš„è¯­å¥æè¿°æ— é™çš„å¯¹è±¡! ç‘å£«çš„è®¡ç®—æœºç§‘å­¦å®¶ å°¼å…‹åŠ³æ–¯Â·ç»´å°”ç‰¹ å¦‚æ˜¯è¯´..\n è€ƒè™‘ä¸€ä¸‹ é˜¶ä¹˜å‡½æ•° fact çš„å®šä¹‰:\nfact n = 1 if n == 0 else (n * fact (n-1)) \/\/ å°è¯•è¿›è¡Œ lambda æŠ½è±¡ [å¿½ç•¥è¡¨è¾¾å¼çš„ç»†èŠ‚] let zero? = lambda n x y . if-then-else (n == 0) x y let pred = lambda x .",
    "inLanguage" : "en-us",
    "author" : "ash",
    "creator" : "ash",
    "publisher": "ash",
    "accountablePerson" : "ash",
    "copyrightHolder" : "ash",
    "copyrightYear" : "2020",
    "datePublished": "2020-11-23 15:57:10 \u002b0800 CST",
    "dateModified" : "2020-11-23 15:57:10 \u002b0800 CST",
    "url" : "https:\/\/ash-z01.github.io\/2020\/recursion\/",
    "wordCount" : "1473",
    "keywords" : [ "Lambda","Î»","Î»-æ¼”ç®—", "Rubik Cell Space"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch">
                
                ğŸ’¡
            </a>&nbsp;<a href="https://ash-z01.github.io/">Rubik Cell Space</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch">
                
                ğŸ¾
                </a>&nbsp;<a href="https://ash-z01.github.io/">Rubik Cell Space</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Recursion of Lambda-Calculus</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://ash-z01.github.io/" rel="author">ash</a> ğŸ±â€ğŸ’» 
                <span class="post-time">
                on <time datetime=2020-11-23 itemprop="datePublished">November 23, 2020</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://ash-z01.github.io/categories/lambda%E5%A5%A5%E7%A7%98/"> Lambdaå¥¥ç§˜ </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          <blockquote>
<p>ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šï¼Œæ­£åœ¨ç»™å°å’Œå°šè®²æ•…äº‹å‘¢ï¼æ•…äº‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€œä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šï¼Œæ­£åœ¨ç»™å°å’Œå°šè®²æ•…äº‹å‘¢ï¼æ•…äº‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€˜ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šï¼Œæ­£åœ¨ç»™å°å’Œå°šè®²æ•…äº‹å‘¢ï¼æ•…äº‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€¦â€¦â€™â€</p>
</blockquote>
<h2 id="0x01-ä¸åŠ¨ç‚¹">0x01 ä¸åŠ¨ç‚¹</h2>
<p>å®šä¹‰å‡½æ•° ğ‘“:â„â†¦â„ï¼Œå¦‚æœ âˆƒğ‘¥âˆˆğ·(ğ‘“)ï¼Œä½¿å¾— ğ‘¥=ğ‘“(ğ‘¥)ï¼Œåˆ™ç§°ç‚¹ ğ‘¥ æ˜¯å‡½æ•° ğ‘“(ğ‘¥) çš„ä¸åŠ¨ç‚¹.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-md" data-lang="md">// ç­‰å¼ x = f(x) å¯ä»¥è¿›è¡Œå¦‚ä¸‹çš„æ— ç©·å˜æ¢

x = f(x)
  = f(f(x))
  = f(f(f(x)))
  = ...
</code></pre></div><h2 id="0x02-é€’å½’">0x02 é€’å½’</h2>
<blockquote>
<p>é€’å½’çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒå…è®¸ç”¨æˆ·ç”¨æœ‰é™çš„è¯­å¥æè¿°æ— é™çš„å¯¹è±¡! ç‘å£«çš„è®¡ç®—æœºç§‘å­¦å®¶ <code>å°¼å…‹åŠ³æ–¯Â·ç»´å°”ç‰¹</code> å¦‚æ˜¯è¯´..</p>
</blockquote>
<p>è€ƒè™‘ä¸€ä¸‹ é˜¶ä¹˜å‡½æ•° <code>fact</code> çš„å®šä¹‰:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-md" data-lang="md">fact n = 1 if n == 0 else (n <span style="font-style:italic">* fact (n-1))
</span><span style="font-style:italic">
</span><span style="font-style:italic">// å°è¯•è¿›è¡Œ lambda æŠ½è±¡ [å¿½ç•¥è¡¨è¾¾å¼çš„ç»†èŠ‚]
</span><span style="font-style:italic">let zero? = lambda n x y . if-then-else (n == 0) x y
</span><span style="font-style:italic">let pred = lambda x . x - 1
</span><span style="font-style:italic">
</span><span style="font-style:italic">fact = lambda n . zero? n 1 (n *</span> fact (pred n))

// å³ä¾§è¿˜æ˜¯æœ‰factï¼Œæ€ä¹ˆåŠï¼Œå†æ¬¡ä½¿ç”¨lambda, æŠŠå®ƒæ‹½å‡ºæ¥è¯•è¯•..

fact = (lambda f . (lambda n . zero? n 1 (n * f (pred n)))) fact

// çœ‹ç€å¥½ä¹±ï¼ŒæŠ½è±¡ä¸€ä¸‹å§..
F = E(F) // Fæ˜¯fact, Eæ˜¯ä¸­é—´çš„lambdaå‡½æ•°
  = E(E(F)) // å¯ä»¥æ— ç©·æ›¿æ¢å“!!!
  = E(E(E(F)))
  = ...
</code></pre></div><p>ä¹Ÿå°±æ˜¯è¯´, <code>F</code> æ˜¯å‡½æ•° <code>E</code> çš„ä¸åŠ¨ç‚¹ï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°çœ‹ç€å¥½å¤æ‚é¸­ï¼Œæˆ‘è¯¥å¦‚ä½•æ±‚è§£å‘¢(è¿™é‡Œå…ˆä¸è®¨è®ºé«˜é˜¶å‡½æ•°çš„æ±‚è§£æ–¹æ³•)~</p>
<h2 id="0x03-ä¼ è¯´ä¸­çš„-yç»„åˆå­">0x03 ä¼ è¯´ä¸­çš„ Yç»„åˆå­</h2>
<p>å¬å”¤!! <code>Yç»„åˆå­</code> !! ä¸€èµ·æ¥ç…ç…è¿™æ˜¯ä¸ªå•¥ä¸œä¸œ~</p>
<p><code>Yç»„åˆå­</code> ä½œä¸ºé«˜çº§å‡½æ•°ä¸åŠ¨ç‚¹çš„ <code>&quot;é€šç”¨æ±‚æ ¹å…¬å¼&quot;</code>ï¼Œåªè¦å‡½æ•°å­˜åœ¨ä¸åŠ¨ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ <code>Yç»„åˆå­</code> ç»“åˆå‡½æ•°ï¼Œè¿›è¡Œæ±‚è§£</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-md" data-lang="md">Y(E) = F
     = E(F)      // F = E(F) 
     = E(Y(E))
     = E(E(Y(E)))
</code></pre></div><p>åˆ©ç”¨ <code>Yç»„åˆå­</code> å¯ä»¥æ±‚è§£å¾—åˆ° <code>F</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-md" data-lang="md">F = Y(E)
  = Y(lambda f . (lambda n . zero? n 1 f(n * (pred n))))
</code></pre></div><p>é‚£ä¹ˆè¿™ä¸ª <code>Y</code> åˆ°åº•é•¿å•¥æ ·å‘¢~ (è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæœ‰è¶£çš„å°æ —å­, ä¸€èµ·æ¨å¯¼ä¸€ä¸‹å§~)</p>
<h2 id="0x04-æ¨å¯¼-y-ç»„åˆå­ç¼–ç¨‹">0x04 æ¨å¯¼ Y ç»„åˆå­[ç¼–ç¨‹]</h2>
<p>è¿™èŠ‚æˆ‘ä»¬å°†ä»ä¸€ä¸ªå¸¸è§çš„å‡½æ•°å‡ºå‘ï¼Œç¼–ç¨‹æ¨å¯¼å‡º <code>Yç»„åˆå­</code> ï¼Œä¸ç†Ÿæ‚‰ç¼–ç¨‹çš„å°ä¼™ä¼´ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡ï¼Œä¸è¿‡æˆ‘é‡‡ç”¨çš„Luaè¯­è¨€ç®€å•çµæ´»ï¼Œå¾ˆæ–¹ä¾¿é˜…è¯»ç†è§£çš„ï¼Œé‚£ä¹ˆå¼€å§‹å§~</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-lua" data-lang="lua"><span style="color:#75715e">--[[
</span><span style="color:#75715e"># Yé­”æ³•
</span><span style="color:#75715e"># Y Y = Y (Y Y)
</span><span style="color:#75715e">]]</span>

<span style="color:#66d9ef">local</span> arr1 <span style="color:#f92672">=</span> {<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>} <span style="color:#75715e">-- Luaä¸­å®šä¹‰çš„æ•°ç»„(å…¶å®æ˜¯è¡¨ï¼Œä¸ç”¨åœ¨æ„è¿™äº›ç»†èŠ‚)</span>

<span style="color:#75715e">--[[
</span><span style="color:#75715e">    è¿™é‡Œå…ˆå®šä¹‰ä¸¤ä¸ªå‡½æ•°,
</span><span style="color:#75715e">    isEmpty ç”¨äºåˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©º;
</span><span style="color:#75715e">    shift   ç”¨äºå°†æ•°ç»„ä¸­ç¬¬ä¸€é¡¹å…ƒç´ ç§»é™¤, JSç©å®¶åº”è¯¥å¾ˆç†Ÿæ‚‰è¿™ä¸ªå‘½åå§~
</span><span style="color:#75715e">]]</span>

<span style="color:#66d9ef">local</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isEmpty</span>(arr)
    <span style="color:#66d9ef">if</span> next(arr) <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">then</span>   <span style="color:#75715e">-- è¹©è„šçš„ ç©ºè¡¨åˆ¤æ–­ arr == {}, å°†å°±ä¸€ä¸‹å§</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
    <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
<span style="color:#66d9ef">end</span>

<span style="color:#66d9ef">local</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">shift</span>(arr)
    table.remove(arr, <span style="color:#ae81ff">1</span>)   <span style="color:#75715e">-- Luaä¸‹æ ‡ä»1å¼€å§‹</span>
    <span style="color:#66d9ef">return</span> arr
<span style="color:#66d9ef">end</span>

<span style="color:#75715e">-- å¥½çš„ï¼Œå¼€å§‹æˆ‘ä»¬çš„æ—…ç¨‹å§~</span>

<span style="color:#75715e">--[[
</span><span style="color:#75715e">* ç°åœ¨é—®é¢˜æ¥äº†ï¼Œæˆ‘æƒ³æ±‚è§£ æ•°ç»„çš„é•¿åº¦ è¯¥æ€ä¹ˆåšå‘¢?
</span><span style="color:#75715e">]]</span>

<span style="color:#75715e">-- [åŠ¡å®çš„å°ä¼™ä¼´è‚¯å®šç¬¬ä¸€æ—¶é—´æƒ³åˆ°ï¼ŒLuaæœ‰æ²¡æœ‰å†…å»ºå‡½æ•°æˆ–è€…è¯­æ³•ç³–ï¼Œæœ‰çš„è¯ï¼Œé‚£å°±å¾ˆæ–¹ä¾¿äº†é¸­~]</span>
<span style="color:#75715e">-- ä¸€ç•ªæ£€ç´¢ä¹‹åï¼Œå‘ç° Lua è¿˜çœŸæœ‰</span>
<span style="color:#75715e">-- print(#arr1) -- å“ˆå“ˆï¼ŒæˆåŠŸå¾—åˆ°äº† æ•°ç»„arr çš„é•¿åº¦</span>

<span style="color:#75715e">-- çœ‹æ¥å¤§å®¶éƒ½èƒ½å¾ˆè½»æ¾åœ°åº”å¯¹å˜›~  [å°±è¿™!??]</span>


<span style="color:#75715e">-- é‚£å¦‚æœï¼Œä¸å…è®¸ä½¿ç”¨å†…ç½®è¯­æ³•ç³–å‘¢??</span>
<span style="color:#75715e">-- [èªæ˜çš„å°ä¼™ä¼´è¡¨ç¤º: è¿™ä¹Ÿéš¾ä¸å€’æˆ‘~ çœ‹æˆ‘é€’å½’æ˜¾ç¥é€š...]</span>
<span style="color:#66d9ef">local</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">rlength</span>(arr)
    <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> rlength(shift(arr))  <span style="color:#75715e">-- ä½¿ç”¨äº†æœ¬èº«çš„å‡½æ•°å</span>
<span style="color:#66d9ef">end</span>
<span style="color:#75715e">-- print(rlength(arr1))  </span>

<span style="color:#75715e">-- (å•ª-å•ª-å•ª~ é¼“æŒå£°)</span>

<span style="color:#75715e">--[[ 
</span><span style="color:#75715e">    ä½†æ˜¯!! ä½ ä»¬ä»¥ä¸ºè¿™å°±å®Œäº†å˜›~?~ too young too naive~
</span><span style="color:#75715e">
</span><span style="color:#75715e">    [æˆ‘çŸ¥é“ï¼å°¾è°ƒç”¨ä¼˜åŒ–ï¼Œæ”¹æˆå°¾é€’å½’å½¢å¼~]
</span><span style="color:#75715e">
</span><span style="color:#75715e">    ä¸ä¸ä¸ï¼Œä¸è¦è¯¯ä¼šï¼Œæˆ‘ä¸æ˜¯åœ¨ä¸€æ­¥æ­¥åˆéš¾å„ä½~
</span><span style="color:#75715e">    æˆ‘åªæ˜¯å‘ç°ï¼Œå‡½æ•°ä½“å†…ä½¿ç”¨ç€å‡½æ•°æœ¬èº«çš„åå­—ï¼Œæƒ³æŠŠå®ƒå»æ‰è€Œå·²
</span><span style="color:#75715e">
</span><span style="color:#75715e">    [çº³å°¼ï¼ï¼Ÿæˆ‘çœ‹ï¼Œä½ å°±æ˜¯åœ¨åˆéš¾æˆ‘èƒ–è™ï¼ï¼]
</span><span style="color:#75715e">]]</span>

<span style="color:#66d9ef">local</span> lenX <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(arr)
    <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">end</span>
    <span style="color:#75715e">-- return 1 + ???(shift(arr))</span>
<span style="color:#66d9ef">end</span>


<span style="color:#75715e">--[[
</span><span style="color:#75715e">    å…ˆå»çœ‹ç‚¹åˆ«çš„
</span><span style="color:#75715e">]]</span>

<span style="color:#75715e">-- è¿™ä¸ªå‡½æ•°åšå•¥é¸­ï¼Œå¥½åƒä¸æ–­è°ƒç”¨è‡ªèº«ï¼Œæ°¸è¿œä¸ä¼šåœæ­¢!</span>
<span style="color:#66d9ef">local</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">eternity</span>(x)
    <span style="color:#66d9ef">return</span> eternity(x)
<span style="color:#66d9ef">end</span>

<span style="color:#75715e">-- æ¥çœ‹çœ‹ è¿™ä¸ªå‡½æ•°æ˜¯å•¥</span>
<span style="color:#66d9ef">local</span> len0 <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(arr)
    <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> eternity(shift(arr))
<span style="color:#66d9ef">end</span>
<span style="color:#75715e">-- æˆ‘ä»¬å…ˆè·¨å‡ºæœ€å°çš„ä¸€æ­¥ï¼Œæ±‚è§£ é•¿åº¦ä¸º0 çš„æ•°ç»„é•¿åº¦</span>
<span style="color:#75715e">-- print(len0({}))</span>


<span style="color:#75715e">-- é‚£ä¹ˆé•¿åº¦ä¸º1 çš„æ•°ç»„å‘¢</span>
<span style="color:#66d9ef">local</span> len1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(arr)
    <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> len0(shift(arr))
<span style="color:#66d9ef">end</span>
<span style="color:#75715e">-- print(len1({1}))</span>


<span style="color:#75715e">-- å‡½æ•°å±•å¼€ä¸€ä¸‹</span>
len1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (arr)
    <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> (<span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> eternity(shift(arr))
    <span style="color:#66d9ef">end</span>)(shift(arr))
<span style="color:#66d9ef">end</span>
<span style="color:#75715e">-- print(len1({1}))</span>


<span style="color:#75715e">-- å¥½åƒ å¾ˆéš¾æ²¡æœ‰å¤ªå¤šå¯å‘å˜›ï¼Œé‚£å°±ç»§ç»­ï¼Œçœ‹çœ‹ é•¿åº¦ä¸º2 çš„æ•°ç»„</span>
<span style="color:#66d9ef">local</span> len2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (arr)
    <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> len1(shift(arr))
<span style="color:#66d9ef">end</span>
<span style="color:#75715e">-- print(len2({1,2}))</span>

<span style="color:#75715e">-- ç»§ç»­å±•å¼€</span>
len2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (arr)
    <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> (<span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> (<span style="color:#66d9ef">function</span> (arr)
            <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
                <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
            <span style="color:#66d9ef">end</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> eternity(shift(arr))
        <span style="color:#66d9ef">end</span>)(shift(arr))
    <span style="color:#66d9ef">end</span>)(shift(arr))
<span style="color:#66d9ef">end</span>
<span style="color:#75715e">-- print(len2({1,2}))</span>


<span style="color:#75715e">-- å¼€å§‹çœ‹ç€æœ‰ç‚¹ç»•äº†å‘¢ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰çœ‹å‡ºå¤ªå¤šç«¯å€ªå‘¢~</span>
<span style="color:#75715e">-- å‰è¿›!!  é•¿åº¦ä¸º3 çš„æ•°ç»„</span>
<span style="color:#66d9ef">local</span> len3 <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (arr)
    <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span> 
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> (<span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> (<span style="color:#66d9ef">function</span> (arr)
            <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
                <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
            <span style="color:#66d9ef">end</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> (<span style="color:#66d9ef">function</span> (arr)
                <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
                    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
                <span style="color:#66d9ef">end</span>
                <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> eternity(shift(arr))
            <span style="color:#66d9ef">end</span>)(shift(arr))
        <span style="color:#66d9ef">end</span>)(shift(arr))
    <span style="color:#66d9ef">end</span>)(shift(arr))
<span style="color:#66d9ef">end</span>
<span style="color:#75715e">-- print(len3({1,2,3}))</span>


<span style="color:#75715e">-- å®³ï¼Œé‡å¤ä»£ç æŒºå¤šçš„ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æå–å‡ºæ¥</span>
<span style="color:#75715e">-- ç®€å•ä¸€ç‚¹å°±ä» é•¿åº¦ä¸º0 çš„æ•°ç»„å¼€å§‹å§</span>
len0 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)(eternity)
<span style="color:#75715e">-- print(len0({}))</span>

<span style="color:#75715e">-- é‚£ä¹ˆ é•¿åº¦ä¸º1ï¼Œ2ï¼Œ3çš„æ•°ç»„ ä¹Ÿå°±æ˜äº†äº†</span>
len1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)(len0)
<span style="color:#75715e">-- print(len1({1}))</span>

len2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)(len1)
<span style="color:#75715e">-- print(len2({1,2}))</span>

len3 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)(len2)
<span style="color:#75715e">-- print(len3({1,2,3}))</span>


<span style="color:#75715e">-- æ„Ÿè§‰çœ‹ä¸å‡ºå•¥ç«¯å€ªï¼Œç»§ç»­å±•å¼€çœ‹çœ‹</span>
len1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)((<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)(eternity))


len2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)((<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)((<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)(eternity)))


len3 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)((<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)((<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)((<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)(eternity))))

<span style="color:#75715e">-- print(len0({}))</span>
<span style="color:#75715e">-- print(len1({1}))</span>
<span style="color:#75715e">-- print(len2({1,2}))</span>
<span style="color:#75715e">-- print(len3({1,2,3}))</span>


<span style="color:#75715e">-- è‡ªå·±è§‚å¯Ÿä¸€ä¸‹ï¼Œå¥½åƒæ˜¯ f(f(f(ete))) è¿™æ ·çš„æ¨¡å¼å‘¢ï¼Œemmmm... é‚£ä¹ˆå†æå–è¯•è¯•</span>
len0 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> f(eternity)
<span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)
<span style="color:#75715e">-- print(len0({}))</span>


<span style="color:#75715e">-- å­¦åºŸäº†ï¼ï¼ é•¿åº¦ä¸º1ï¼Œ2ï¼Œ3çš„æ•°ç»„  ä¾æ ·ç”»è‘«èŠ¦~</span>
len1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> f(f(eternity))
<span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)
<span style="color:#75715e">-- print(len1({1}))</span>

len2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> f(f(f(eternity)))
<span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)
<span style="color:#75715e">-- print(len2({1,2}))</span>

len3 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> f(f(f(f(eternity))))
<span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)
<span style="color:#75715e">-- print(len3({1,2,3}))</span>


<span style="color:#75715e">--[[
</span><span style="color:#75715e">   æ„Ÿè§‰æ‚Ÿå‡ºäº†ä¸€äº›å•¥ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰è¿›ä¸€æ­¥çš„æ€è·¯å“~
</span><span style="color:#75715e">   å®³ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼Œå°±æäº‹æƒ…ï¼ï¼
</span><span style="color:#75715e">   eternityå‡½æ•°æ—¢ç„¶ä¸ä¼šæ‰§è¡Œåˆ°, é‚£å°±å¯ä»¥éšæ„æ›¿æ¢, æ¯”å¦‚è¿™æ ·-&gt; [æ›¿æ¢è‡ªèº«]
</span><span style="color:#75715e">]]</span>
len0 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> f(f)
<span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> flen(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)
<span style="color:#75715e">-- print(len0({}))</span>

<span style="color:#75715e">-- emmm~ å¿ƒæ»¡æ„è¶³!  å†ä»”ç»†çœ‹çœ‹ï¼Œå¥½åƒflenè¿™ä¸ªå‡½æ•°åå­—ä¹Ÿå¯ä»¥æ¢ä¸€ä¸‹~ ä¸€å®¶äººå°±æ˜¯è¦æ•´æ•´é½é½!~</span>
len0 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> f(f)
<span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> f(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)
<span style="color:#75715e">-- print(len0({}))</span>

<span style="color:#75715e">--  è§„çº¦ä¸€ä¸‹çœ‹çœ‹æ˜¯å•¥æ ·~</span>
len0 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> f(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> f(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)
<span style="color:#75715e">-- print(len0({}))</span>

<span style="color:#75715e">-- å¤©å‘!!! å‡½æ•°æŠŠè‡ªå·±ä¼ ç»™äº†è‡ªå·±~!!!!</span>


<span style="color:#75715e">-- è¿›ä¸€æ­¥è§„çº¦ï¼</span>
len0 <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (arr)
    <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> (<span style="color:#66d9ef">function</span> (f)
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
            <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
                <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
            <span style="color:#66d9ef">end</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> f(shift(arr))
        <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">end</span>)(shift(arr))
<span style="color:#66d9ef">end</span>
<span style="color:#75715e">-- print(len0({}))</span>

<span style="color:#75715e">--[[
</span><span style="color:#75715e">    ç»†ç»†æ£æ‘©ä¸€ä¸‹, F(F) æ„é€ å‡ºçš„å‡½æ•°Z
</span><span style="color:#75715e">    1. å½“ä¼ å…¥é•¿åº¦ä¸º0çš„ç©ºæ•°ç»„æ—¶ï¼Œè¿”å›0   Z({}) =&gt; 0
</span><span style="color:#75715e">    2. Z({1}) =&gt; 1 + å‡½æ•°F(...)  å¦‚æœæ­¤æ—¶è¿™ä¸ªF è¿˜æ˜¯ F(F) å‘¢ =&gt; F(F)(...)
</span><span style="color:#75715e">  
</span><span style="color:#75715e">  æƒ³è±¡ä¸€ä¸‹ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆ~
</span><span style="color:#75715e">
</span><span style="color:#75715e">]]</span>
<span style="color:#75715e">--</span>

len0 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> f(f)
<span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#75715e">-- return 1 + f(shift(arr))</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> f(f)(shift(arr))  <span style="color:#75715e">-- æ³¨æ„æ­¤å¤„çš„å˜åŒ–</span>
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)
<span style="color:#75715e">-- print(len0({}))</span>
<span style="color:#75715e">-- print(len0({1,2}))</span>

<span style="color:#75715e">-- é€šè¿‡ä¸æ–­äº§ç”Ÿçš„ F(F)ï¼Œ ä¸æ–­æ¨è¿Ÿè®¡ç®—ï¼Œç›´è‡³ æ•°ç»„é•¿åº¦ä¸º0. </span>

<span style="color:#75715e">-- è¿™é‡Œæ˜¯ä¸æ˜¯è•´æ¶µç€æŸç§æ›´é€šç”¨çš„ç¥ç§˜åŠ›é‡å‘¢~</span>
<span style="color:#75715e">-- è¿›ä¸€æ­¥æå–</span>
lenX <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> f(f)
<span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> (<span style="color:#66d9ef">function</span> (length)
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
            <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
                <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
            <span style="color:#66d9ef">end</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> length(shift(arr))
        <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">end</span>)
    <span style="color:#75715e">-- (f(f))          -- call-by-valueçš„æ±‚å€¼ç­–ç•¥ä¸‹ï¼Œé¿å…å‚æ•°æ— é™æ±‚å€¼ï¼Œå¯¼è‡´æ ˆæº¢å‡º</span>
    (<span style="color:#66d9ef">function</span> (x)
        <span style="color:#66d9ef">return</span> f(f)(x)
    <span style="color:#66d9ef">end</span>)
<span style="color:#66d9ef">end</span>)
<span style="color:#75715e">-- print(lenX({1,2,3,4,5}))</span>


<span style="color:#75715e">-- lenX = (function (f)</span>
<span style="color:#75715e">--     return f(f)</span>
<span style="color:#75715e">-- end)((function (flen)</span>
<span style="color:#75715e">--     return function (f)</span>
<span style="color:#75715e">--         return flen(function (x)</span>
<span style="color:#75715e">--             return f(f)(x)</span>
<span style="color:#75715e">--         end)</span>
<span style="color:#75715e">--     end</span>
<span style="color:#75715e">-- end)(function (length)</span>
<span style="color:#75715e">--     return function (arr)</span>
<span style="color:#75715e">--         if isEmpty(arr) then</span>
<span style="color:#75715e">--             return 0</span>
<span style="color:#75715e">--         end</span>
<span style="color:#75715e">--         return 1 + length(shift(arr))</span>
<span style="color:#75715e">--     end</span>
<span style="color:#75715e">-- end))</span>

<span style="color:#75715e">-- å†æå–</span>
lenX <span style="color:#f92672">=</span> (<span style="color:#66d9ef">function</span> (flen)
    <span style="color:#66d9ef">return</span> (<span style="color:#66d9ef">function</span> (f)
        <span style="color:#66d9ef">return</span> f(f)
    <span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (f)
        <span style="color:#66d9ef">return</span> flen(<span style="color:#66d9ef">function</span> (x)
            <span style="color:#66d9ef">return</span> f(f)(x)
        <span style="color:#66d9ef">end</span>)
    <span style="color:#66d9ef">end</span>)
<span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (length)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> length(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)
<span style="color:#75715e">-- print(lenX({1,2,3,4,5}))</span>

<span style="color:#75715e">-- OK, åˆ°äº†è¿™é‡Œå°±å·®ä¸å¤šäº†ï¼Œè§‚å¯Ÿä¸€ä¸‹å‡½æ•°å½¢å¼  F = Y(E)</span>
<span style="color:#75715e">-- æå–Yå‡½æ•°</span>

Y <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (f)
    <span style="color:#66d9ef">return</span> (<span style="color:#66d9ef">function</span> (u)
        <span style="color:#66d9ef">return</span> u(u)
    <span style="color:#66d9ef">end</span>)(<span style="color:#66d9ef">function</span> (u)
        <span style="color:#66d9ef">return</span> f(<span style="color:#66d9ef">function</span> (x)
            <span style="color:#66d9ef">return</span> u(u)(x)
        <span style="color:#66d9ef">end</span>)
    <span style="color:#66d9ef">end</span>)
<span style="color:#66d9ef">end</span>

<span style="color:#66d9ef">local</span> final_len <span style="color:#f92672">=</span> Y(<span style="color:#66d9ef">function</span> (length)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (arr)
        <span style="color:#66d9ef">if</span> isEmpty(arr) <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> length(shift(arr))
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)

<span style="color:#75715e">-- print(final_len({1,2,3,4,5}))</span>

<span style="color:#75715e">--[[
</span><span style="color:#75715e">    æœ‰äº†Yå‡½æ•°ï¼Œæˆ‘ä»¬å°±èƒ½å¾ˆæ–¹ä¾¿åœ°å¤„ç†åŒ¿åé€’å½’
</span><span style="color:#75715e">]]</span>

<span style="color:#75715e">-- é˜¶ä¹˜å‡½æ•°[é€’å½’å½¢å¼]</span>
<span style="color:#66d9ef">local</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fact</span>(n)
    <span style="color:#66d9ef">if</span> n <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">return</span> n <span style="color:#f92672">*</span> fact(n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
<span style="color:#66d9ef">end</span>
<span style="color:#75715e">-- print(fact(4))</span>


<span style="color:#75715e">-- é˜¶ä¹˜å‡½æ•°[åŒ¿åé€’å½’]</span>
<span style="color:#66d9ef">local</span> anon_fact <span style="color:#f92672">=</span> Y(<span style="color:#66d9ef">function</span> (fact)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (n)
        <span style="color:#66d9ef">if</span> n <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">then</span>
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
        <span style="color:#66d9ef">end</span>
        <span style="color:#66d9ef">return</span> n <span style="color:#f92672">*</span> fact(n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>)
<span style="color:#75715e">-- print(anon_fact(5))</span>


<span style="color:#75715e">--[[
</span><span style="color:#75715e">    [æ‰€ä»¥è¿™ä¸ªYå‡½æ•°åˆ°åº•æ˜¯å•¥å‘¢??] 
</span><span style="color:#75715e">    åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¸º -&gt; [åº”ç”¨åº]Yç»„åˆå­
</span><span style="color:#75715e">]]</span>
</code></pre></div><h2 id="0x05-ç»ˆäºè§åˆ°-y">0x05 ç»ˆäºè§åˆ° Y</h2>
<p>ç»è¿‡ä¸Šé¢çš„ç¼–ç¨‹æ¨æ¼”, æœ€ç»ˆå¾—åˆ°äº† <code>Yç»„åˆå­</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-md" data-lang="md">Y = Î»f.(Î»x.(f (x x)) Î»x.(f (x x)))  // Call-By-Name
Y = Î»f.((Î»u.(u u)) Î»x.(f Î»v.(x x v))) // Call-By-Value
</code></pre></div><p>æœ€åç”¨ä¸€ä¸ªä¾‹å­å‡½æ•°gæ¥å±•å¼€å®ƒï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•æˆä¸ºä¸€ä¸ªä¸åŠ¨ç‚¹ç»„åˆå­çš„.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-md" data-lang="md">(Y g)
    = (Î»f.(Î»x.(f (x x)) Î»x.(f (x x))) g) // å±•å¼€
    = (Î»x.(g (x x)) Î»x.(g (x x))) // Î»fçš„Î²-å½’çº¦ - åº”ç”¨ä¸»å‡½æ•°äºg
    = (Î»y.(g (y y)) Î»x.(g (x x)))// Î±-è½¬æ¢ - é‡å‘½åçº¦æŸå˜é‡
    = (g (Î»x.(g (x x)) Î»x.(g (x x)))) // Î»yçš„Î²-å½’çº¦ - åº”ç”¨å·¦ä¾§å‡½æ•°äºå³ä¾§å‡½æ•°
    = (g (Y g)) // Yçš„å®šä¹‰
</code></pre></div><h2 id="0x06-å‚è€ƒ">0x06 å‚è€ƒ</h2>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/%E5%93%88%E6%96%AF%E5%87%AF%E5%B0%94%C2%B7%E6%9F%AF%E9%87%8C">wiki - å“ˆæ–¯å‡¯å°”Â·æŸ¯é‡Œ</a></li>
<li><a href="https://mitpress.mit.edu/books/little-schemer-fourth-edition">book - TheLittleSchemer</a></li>
<li><a href="...">paper - Programming Languages and Lambda Calculi</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E9%80%92%E5%BD%92">wiki - é€’å½’</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%CE%9B%E6%BC%94%E7%AE%97">wiki - Î»æ¼”ç®—</a></li>
<li><a href="http://goodmath.blogspot.com/">blog - Good Math/Bad Math</a></li>
<li><a href="https://www.slideshare.net/yinwang0/reinventing-the-ycombinator">share - ç‹å </a></li>
<li><a href="...">paper - The Theory of Recursive Functions, Approaching its Centennial</a></li>
<li><a href="...">paper - è°ˆè°ˆ lambda</a></li>
<li><a href="...">paper - History of Lambda-calculus and Combinatory Logic</a></li>
</ul>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>ash </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://ash-z01.github.io/2020/recursion/>https://ash-z01.github.io/2020/recursion/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                æœ¬æ–‡é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://ash-z01.github.io/tags/lambda/">
                    #Lambda</a></span>
            
            <span class="tag"><a href="https://ash-z01.github.io/tags/%CE%BB/">
                    #Î»</a></span>
            
            <span class="tag"><a href="https://ash-z01.github.io/tags/%CE%BB-%E6%BC%94%E7%AE%97/">
                    #Î»-æ¼”ç®—</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> Â· 
                <span><a href="https://ash-z01.github.io/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://ash-z01.github.io/2020/boolandcondition/" class="prev" rel="prev" title="Bool and Condition of Lambda-Calculus"><i class="iconfont icon-left"></i>&nbsp;Bool and Condition of Lambda-Calculus</a>
         
        
        <a href="https://ash-z01.github.io/2021/cap/" class="next" rel="next" title="CP or AP?">CP or AP?&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2020 - 2021</span>
        
        <span class="with-ash">
        
        ğŸš€
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://ash-z01.github.io/">ash</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
